openapi: 3.0.3
info:
  title: GetEmpStatus API
  version: 1.0.0
paths:
  /api/GetEmpStatus:
    post:
      summary: Compute employee status by NationalNumber
      parameters:
        - in: header
          name: x-api-token
          required: true
          description: Must match the `API_TOKEN` value in the server environment.
          schema:
            type: string
      security:
        - ApiTokenAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [NationalNumber]
              properties:
                NationalNumber:
                  type: string
                  example: NAT1001
      responses:
        "200":
          description: Computed status
          content:
            application/json:
              schema:
                type: object
                properties:
                  EmployeeName:
                    type: string
                    example: John Doe
                  NationalNumber:
                    type: string
                    example: NAT1001
                  HighestSalary:
                    type: number
                    example: 2500
                  AverageSalary:
                    type: number
                    example: 1870.45
                  Status:
                    type: string
                    enum: ["GREEN", "ORANGE", "RED"]
                  IsActive:
                    type: boolean
                    example: true
                  LastUpdated:
                    type: string
                    example: "2025-10-25T10:00:00Z"
        "401": { description: Unauthorized }
        "404": { description: Invalid National Number }
        "406": { description: User is not Active }
        "422": { description: INSUFFICIENT_DATA }
components:
  securitySchemes:
    ApiTokenAuth:
      type: apiKey
      in: header
      name: x-api-token
